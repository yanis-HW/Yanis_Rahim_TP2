<div class="contact-wrap container py-4">
  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-card mx-auto" novalidate>
    <h2 class="text-center mb-3 fw-semibold">Formulaire de Contact</h2>

    <!-- Prénom -->
    <div class="mb-3">
      <label for="prenom" class="form-label">Prénom *</label>
      <input
        type="text"
        id="prenom"
        formControlName="prenom"
        class="form-control"
        [class.is-invalid]="prenomCtrl.invalid && prenomCtrl.touched"
        [attr.aria-invalid]="prenomCtrl.invalid ? true : null"
        aria-describedby="prenom-error"
      />
      @if (prenomCtrl.invalid && prenomCtrl.touched) {
      <div class="invalid-msg" id="prenom-error">Le prénom est requis</div>
      }
    </div>

    <!-- Nom -->
    <div class="mb-3">
      <label for="nom" class="form-label">Nom *</label>
      <input
        type="text"
        id="nom"
        formControlName="nom"
        class="form-control"
        [class.is-invalid]="nomCtrl.invalid && nomCtrl.touched"
        [attr.aria-invalid]="nomCtrl.invalid ? true : null"
        aria-describedby="nom-error"
      />
      @if (nomCtrl.invalid && nomCtrl.touched) {
      <div class="invalid-msg" id="nom-error">Le nom est requis</div>
      }
    </div>

    <!-- Âge -->
    <div class="mb-3">
      <label for="age" class="form-label">Âge</label>
      <input type="number" id="age" formControlName="age" class="form-control" />
    </div>

    <!-- Checkbox Hide -->
    <div class="form-check form-switch mb-3">
      <input
        class="form-check-input"
        type="checkbox"
        role="switch"
        id="hideEmail"
        formControlName="hide"
      />
      <label class="form-check-label" for="hideEmail">Cacher le champ Email</label>
    </div>

    <!-- Email -->
    @if (!isEmailHidden) {
    <div class="mb-3">
      <label for="email" class="form-label">Email *</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        [class.is-invalid]="emailCtrl.invalid && emailCtrl.touched"
        [attr.aria-invalid]="emailCtrl.invalid ? true : null"
        aria-describedby="email-error"
        autocomplete="email"
        inputmode="email"
      />
      @if (emailCtrl.invalid && emailCtrl.touched) {
      <div class="invalid-msg" id="email-error">
        @if (contactForm.get('email')?.errors?.['required']) {
        <span>L'email est requis</span>
        } @if (contactForm.get('email')?.errors?.['email']) {
        <span>L'email doit contenir un @</span>
        }
      </div>
      }
    </div>
    }

    <!-- Commentaire -->
    <div class="mb-4">
      <label for="commentaire" class="form-label">Commentaire *</label>
      <textarea
        id="commentaire"
        formControlName="commentaire"
        rows="4"
        class="form-control"
        [class.is-invalid]="commentaireCtrl.invalid && commentaireCtrl.touched"
        [attr.aria-invalid]="commentaireCtrl.invalid ? true : null"
        aria-describedby="commentaire-error"
      ></textarea>
      @if (commentaireCtrl.invalid && commentaireCtrl.touched) {
      <div class="invalid-msg" id="commentaire-error">Le commentaire est requis</div>
      }
    </div>

    <!-- Bouton Envoyer -->
    <div class="text-center">
      <button
        type="submit"
        class="btn btn-primary btn-lg submit-btn"
        [disabled]="!contactForm.valid"
      >
        Envoyer
      </button>
    </div>
  </form>
</div>
